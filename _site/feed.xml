<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="https://maximerousseau.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://maximerousseau.com/" rel="alternate" type="text/html" /><updated>2021-09-17T20:17:12+03:00</updated><id>https://maximerousseau.com/feed.xml</id><title type="html">MaximeRousseau.com</title><subtitle> </subtitle><entry><title type="html">An Expat’s Guide to the French Motorcycle Licence</title><link href="https://maximerousseau.com/an-expats-guide-to-french-motorcycle-licence/" rel="alternate" type="text/html" title="An Expat’s Guide to the French Motorcycle Licence" /><published>2021-09-17T20:06:14+03:00</published><updated>2021-09-17T20:06:14+03:00</updated><id>https://maximerousseau.com/an-expats-guide-to-french-motorcycle-licence</id><content type="html" xml:base="https://maximerousseau.com/an-expats-guide-to-french-motorcycle-licence/">&lt;p&gt;France is beautiful country, the only problem is that way too many french people live there. This will quickly become apparent to you once the novelty of being in a new country has worn off, and/or once you’ve stepped into the 16th pile of dog shit in any given week of being in a major French city.&lt;/p&gt;

&lt;p&gt;What better way to flee the locals and the dog shit than to hop onto a motorcycle and  hit the road? France has thousands of kilometers of toll-free scenic roads along it’s coastline, an extensive network of relatively well-maintained “departementales” in the seldom-visited but quaint center of the hexagon, plenty of roads in the Alps, the Pyrenees, and easy access to several other European countries in less than a day of highway riding. I can attest personally, it is a beautiful place to ride, and in my six months of drivings, I feel like I’ve barely scratched the surface.&lt;/p&gt;

&lt;p&gt;So now you want a bike; well, I’m sorry but I lied in my introduction. There are much more problems with France than just it’s inhabitants; the french have invented the central state and perfected bureaucracy to a level that would put Byzantium to shame, so getting in the saddle is going to be slightly harder than just buying a bike. I’ve gone through this process myself, and I’m here to help.&lt;/p&gt;

&lt;h2 id=&quot;step-0-who-this-is-for&quot;&gt;Step 0: Who this is for&lt;/h2&gt;

&lt;p&gt;I am writing this for holders of VLS (visa long séjour, or long stay visa), although it may apply to the holders of other visas. In practical terms, I am not sure that going through any of this bureaucratic rigamarole is worth it on a stay any shorter than six months, unless you are going to return to France regularly and have some reason to hold an EU permit.&lt;/p&gt;

&lt;p&gt;The foremost reasons to go through all this cost and hassle for me is to own a motorcycle in my name (licence plates don’t need to renewed for motorcycles), keep it in the EU and more easily ride around when I will be back (likely a few months a year).&lt;/p&gt;

&lt;p&gt;It is assumed that you have at least a functional understanding of reading, writing and speaking french. If you don’t… you’re probably not going to make it.&lt;/p&gt;

&lt;h2 id=&quot;step-1-considering-your-options&quot;&gt;Step 1: Considering your options&lt;/h2&gt;

&lt;p&gt;Before you endeavour getting a french licence, consider the other options that you might have that DON’T involve 30+ hours of instruction and a thousand euros; unless you plan on being a regular resident (spent the majority of your time in France), they are many:&lt;/p&gt;

&lt;p&gt;1) &lt;em&gt;Get a motorcycle permit and an international licence in your home jurisdiction.&lt;/em&gt; In my experience, most of the western licences are easily recognized, and provided that you can provide an international licence or notarized translation, your licence will be recognized without any problem. With my Canadian licence, even putting plates on a vehicle wasn’t a problem. This is by far the easier way to get riding, and saves you the hassle of learning the ropes of a brand new bureaucracy. In hindsight, I really wish I had done this; don’t make the same mistake.&lt;/p&gt;

&lt;p&gt;2) &lt;em&gt;Elect to ride a 125cc or smaller bike.&lt;/em&gt; More experienced riders will scoff at this idea, but if you’re new to riding, this might legitimately be a good way to get comfortable. At this engine size most people think of scooters, but the regulations around “light motorcycles” in Europe has encouraged the development of an impressive amount of offerings in this segment. I myself rode a chinese partsbin bike based off a Honda CBF125 engine clone, and there are many variations available (&lt;a href=&quot;https://www.brixton-motorcycles.com/models/&quot;&gt;Brixton&lt;/a&gt;, &lt;a href=&quot;http://www.archivemotorcycle.it&quot;&gt;Archives&lt;/a&gt;), but even more established companies have 125cc offerings that are more well established. The Husqvarna Svartpilen 125 is a good example: twin-cam and water-cooled, it makes 15 HP out of it’s tiny thumper, or 150HP/L, an impressive ratio in any internal combustion engine. If I managed to do highway riding with 9 HP, you’ll be able to do it with 15.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.service-public.fr/particuliers/vosdroits/F45&quot;&gt;You will need a 7-hour class&lt;/a&gt; if you have never ridden a motorcycle before, which will supplement your home state’s car licence with a laminated certificate. Cost is around 200 EUR depending on the market.&lt;/p&gt;

&lt;p&gt;3) Obtain a french driver’s licence; this is what the rest of this post is about. As with the rest of Europe, motorcycle licences are tiered, so you will apply for an A2 licence, which limits you to just under 50HP for the first two years of riding. To get your full licence, you will need to go through another 7 hour class 2 years after having obtained your A2 licence, at which point you will get your full A permit. Most more powerful bikes can be restricted to A2 power levels at the dealership, which essentially means you can buy nearly anything you want with an A2.&lt;/p&gt;

&lt;h2 id=&quot;step-2-paperwork-considerations&quot;&gt;Step 2: Paperwork considerations&lt;/h2&gt;

&lt;p&gt;To defeat your bureaucracy, you need to think like a bureaucrat. Bureaucrats are by nature creatures of habit, unwilling or unable to manage exceptions, which means that your “irregular” application as an immigrant will likely be rejected a few time unless you make it “look” as regular as you possibly can. This is one of the reasons why you should go through this process in your home country if at all possible. Go above and beyond in providing paperwork, without looking like you are trying too hard. It’s a delicate balance, but your driving school will be able to assist you in filing. Here is what you will need:&lt;/p&gt;

&lt;p&gt;1) A proof of address, generally an electricity or other utility bill&lt;/p&gt;

&lt;p&gt;2) A proof of immigration status, generally a visa accompanied by a validation or a carte de séjour. As a “PVT” visa holder, you are exempt from receiving a “carte de séjour”… more on this later.&lt;/p&gt;

&lt;p&gt;3) ID in the form of a passport, an existing drivers licence.&lt;/p&gt;

&lt;p&gt;4) ID photos, preferably in a digital format. Most photo booths can deliver those; they are delivered in the traditional printed format, but a code is also included for easy referencing during your paperwork phases.&lt;/p&gt;

&lt;p&gt;Point number 1 is generally the hard one to acquire. Without a power bill, you are nobody in France… which means that if you are in informal rental arrangements or renting short term through things like AirBnB, you are SOL.&lt;/p&gt;

&lt;p&gt;My way around this was to take out a renter’s insurance policy on the place I was renting, which apart from the cost (about 300 euros, paid once for the year) was relatively painless. I took out my policy through &lt;a href=&quot;https://www.maif.fr&quot;&gt;MAIF&lt;/a&gt;, an insurance mutual with the most helpful staff I’ve ever had the pleasure of dealing with; I highly recommend them. The “attestation d’assurance” document you will get once subscribed is treated as a valid proof of address for all driving-related processes I have gone through.&lt;/p&gt;

&lt;p&gt;You can also try to &lt;a href=&quot;https://www.service-public.fr/particuliers/vosdroits/R39697&quot;&gt;get a sponsor to fill out an “attestation d’hébergement”&lt;/a&gt;, although this is a bit intrusive for all parties. I have not heard reports of this method working, but it is supposed to be formally recognized.&lt;/p&gt;

&lt;h2 id=&quot;step-3-enroll-in-a-motorcycle-driving-school&quot;&gt;Step 3: Enroll in a motorcycle driving school&lt;/h2&gt;

&lt;p&gt;Finding a good school is of utmost importance, and strongly tied to the last two steps. The french have a online management system called &lt;em&gt;Agence nationale des titres sécurisés (ANTS)&lt;/em&gt; that makes obtaining and renewing licences very easy; as an “irregular”, none of these systems will work for you during most of the licensing process; your driving school will essentially be your point of contact for all official communications.&lt;/p&gt;

&lt;p&gt;Most schools will charge between 750 and 1000 euros all inclusive for your training. Put aside some money for gear, as you will need to come equipped with:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;An EU-approved helmet&lt;/li&gt;
  &lt;li&gt;EU-approved motorcycle gloves&lt;/li&gt;
  &lt;li&gt;Shoes or boots that cover the scapula (not necessary but recommended)&lt;/li&gt;
  &lt;li&gt;EU-approved motorcycling vest (not legally necessary, but most schools will not let you ride a bike without one)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;At the time I am writing this, this is at least 300 euros worth of gear. I spent more than this sum on my helmet alone, so prices will vary wildly.&lt;/p&gt;

&lt;h2 id=&quot;step-35--fight-with-bureaucrats&quot;&gt;Step 3.5 : Fight with bureaucrats&lt;/h2&gt;

&lt;p&gt;The Ministry of Interior is the organization that manages both immigration status and drivers licences, so you would think that they would now about different visa programs and their particularities… but you’d be wrong. Entirely different offices manage immigration and licences. In practice, if you are a “PVT” visa holder, there is a very high likelyhood that your initial request for a permit, something that is filed when you register with your school, will be rejected. This is because they are expecting to get a “carte de séjour” or a validated visa along with the documents that your are required to provide to your driving school.&lt;/p&gt;

&lt;p&gt;As a VLS holder, you are &lt;a href=&quot;https://administration-etrangers-en-france.interieur.gouv.fr/particuliers/#/vls-ts/demarches/etape/numero-visa&quot;&gt;exempt from validating your visa&lt;/a&gt;, which in turns makes it impossible for you to get a “carte de séjour”, a document usually delivered by local authorities. Your visa, as in the printed page in your passport is your only valid proof of regularity within the country.&lt;/p&gt;

&lt;p&gt;You will likely need to fight to get this recognized. If you’ve ever successfully fought your way through a bureaucracy, the same rules apply: be relentless but polite, keep a very detailed record of who you talk to, what is said and when, ask for things to be put in writing whenever possible. You will of course need a good mastery of French to do this, as all public services are only available in this language. Keep your driving school in the know, as they can also push certain buttons on their side.&lt;/p&gt;

&lt;h2 id=&quot;step-4--theoretical-lessons-and-exam-aka-code&quot;&gt;Step 4 : Theoretical lessons and exam aka “code”&lt;/h2&gt;

&lt;p&gt;This can usually be done in parallel with step 4. As in many other jurisdictions, you need a learner’s permit to ride on the road accompanied by your driving school; the prerequisites for this is passing a theoretical exam, and the first practical exam.&lt;/p&gt;

&lt;p&gt;My school had an e-learning platform called &lt;a href=&quot;https://public.codesrousseau.fr&quot;&gt;Codes Rousseau&lt;/a&gt; (not related in any way to my family), which presented a series of quizzes to get familiar with the type of questions on the exam. You can speedrun a 100% completion with passing grades within 4-5 hours if you have any basic knowledge of french traffic signs and motorcycles. This gets you ready for the exam, but is NOT the exam itself! Knowing that I was a driver of 10+ years, my school did not give me any theory in class; your mileage may vary.&lt;/p&gt;

&lt;p&gt;Once you are done with the learning, you or your driving school will need to schedule the “code” exam at a service center or post office. I opted to have my school schedule it, since I did not have the correct documents to register myself.&lt;/p&gt;

&lt;p&gt;The exam is a simple, time-limited multiple choice test which you must pass with 80%. There is plenty of time; read the questions carefully and you will be fine. &lt;em&gt;I do not recall seeing an option for going through the test in english!&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&quot;step-5-practical-lessons&quot;&gt;Step 5: Practical lessons&lt;/h2&gt;

&lt;p&gt;The law requires you to attend at least 8 hours of on-track practical instruction. In most schools, this means doing the same drills in 2 hours blocks until you are proficient enough to your instructor’s liking. While you could theoretically stack these lessons in a day, most schools will not let you do this, with good reason. Apart from the obvious mental and physical limitations, I do think that you need a bit of time between lessons for the muscle memory and “feel” to set in.&lt;/p&gt;

&lt;p&gt;The practice is gear towards getting good enough to complete the “circuit”, a choreography designed to test your bike-handling skills at low and average road-going speeds. Here is a video of what this entails:&lt;/p&gt;

&lt;div class=&quot;video&quot;&gt;&lt;figure&gt;&lt;iframe width=&quot;640&quot; height=&quot;480&quot; src=&quot;//www.youtube.com/embed/KNfInlYx57g&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Most of the difficulty according to all but the most agile learners are the low-speed sections; none of the other motorcycle programs that I know of have such a high bar for obtaining a licence.&lt;/p&gt;

&lt;p&gt;Once you are done, your instructor will put your in a test group and give you a date for testing.&lt;/p&gt;

&lt;h2 id=&quot;step-6-practical-test-1---circuit&quot;&gt;Step 6: Practical test #1 - “Circuit”&lt;/h2&gt;

&lt;p&gt;Having your “code” exam is a requirement for this part, despite the practical test not being on the road.&lt;/p&gt;

&lt;p&gt;You are tested on what you have learned at step 4. The process usually happens on very well paved and well-maintained tracks, which in many cases are slightly larger than your driving school’s practice track. My school didn’t tell me this, which was a quite nice surprise.&lt;/p&gt;

&lt;p&gt;You have to complete the full “circuit” to satisfactory standards, within two tries, and having put a maximum of two feet on the ground during any given try.&lt;/p&gt;

&lt;p&gt;There is an intimidation factor since most testing days have many schools attending, and chances are that you will see lots of people failing before you have your turn. Chill out, trust your skills and you will be fine. If you do fail, you will have to wait until you can reschedule another test, and you driving school will likely charge you a supplement.&lt;/p&gt;

&lt;p&gt;Be aware that not having the correct mandatory gear is grounds for instant disqualification from this and any other exams; your driving school should have stressed this. This includes not having reflectors on your helmet.&lt;/p&gt;

&lt;h2 id=&quot;step-7-on-road-driving-practice&quot;&gt;Step 7: On-road driving practice&lt;/h2&gt;

&lt;p&gt;Once you have your exam results for the “circuit”, your instructor will take you out, most of the times in groups of 3 or 4, to ride on local roads and practice your riding skills in a more realistic environment. You will have to do 12 hours of this.&lt;/p&gt;

&lt;p&gt;If you have passed the two previous steps, it’s unlikely that you will have any problems with this step. Most issues that foreign drivers have in France are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Priority rules, which are completely the opposite of any civilized country. In most urban environments, any vehicle coming from your right has priority, meaning that if you are on a 70kmph road and somebody turns right from an intersecting street in front of you, YOU have to yeild. This may sound absolutely crazy, but it’s how things work… to make things worse, sometimes the priority is explicit, but many times it is implicit. I recommend that you tell your instructor that you are unfamiliar with this system in practice, and that you request additional instructions in this regard during your outings.&lt;/li&gt;
  &lt;li&gt;Navigating roundabouts, which takes a bit of getting used to but makes perfect sense.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Otherwise, the usual rules apply.&lt;/p&gt;

&lt;h2 id=&quot;step-8-on-road-driving-test&quot;&gt;Step 8: On-road driving test&lt;/h2&gt;

&lt;p&gt;Once your 12 hours are up, you can apply to pass the test. The starting points are usually the same track that you did your circuit exam on. The evaluator and your instructor will follow you around in regular street driving for about 20 to 30 minutes in a variety of different conditions. There is a point threshold, but in my experience the evaluation is actually pretty subjective.&lt;/p&gt;

&lt;p&gt;You will be judged on your behaviour and technical skills, and ability to read signage; however, there are no points deducted if you misunderstand directions, take a wrong turn or exit, etc. In most places, your instructors will take you on the roads most frequently traveled for testing, and it is a good idea to get familiar with the roads nonetheless; missing an exit will likely have a toll on your mentally even if points aren’t docked.&lt;/p&gt;

&lt;p&gt;My evaluator was looking for a few things that you would normally not expect in a formal evaluation, namely “lively” accelerations (within the limits of reason) and a speed on or slightly above the posted limit. This might be more out of practical concern for getting more types of road covered during our limited time; I would still advise you play it safe and stay a bit under the posted limit, without being too ginger with the throttle when taking off.&lt;/p&gt;

&lt;p&gt;As a general tip, exaggerate all your head movements, while checking mirrors or your blind spots: this is something they are very particular about.&lt;/p&gt;

&lt;p&gt;You will get a pass or fail grade only after having completed your examination, and your evaluator cannot give you any feedback.&lt;/p&gt;

&lt;p&gt;Here again, if you can negotiate a bit of clemency with the evaluator on the grounds of not knowing the local roads, all the better. They likely won’t be too accommodating, but having advanced warning of directions, or being more explicit about where to turn will let you concentrate on the road.&lt;/p&gt;

&lt;h2 id=&quot;step-9--request-your-licence-to-be-printed&quot;&gt;Step 9 : Request your licence to be printed&lt;/h2&gt;

&lt;p&gt;You would think that this would be a bit redundant, but once you have successfully passed the practical exam, you need to ask for your licence to be produced, as in a physical copy printed and sent to you. This is done through the ANTS portal, where you will need to provided all your paperwork, in addition to a new, fresh set of pictures.&lt;/p&gt;

&lt;p&gt;Luckily, you can still use your exam report as a provisional licence for a couple months.&lt;/p&gt;

&lt;p&gt;My licence took two months to get printed and sent, apparently due to a malfunction at the national facility that does the printing. According to the internet, the more “normal” delay is 2 to 4 weeks. Be sure that you can receive mail at the address that you have registered with, because there is no way of changing the address to which the licence is going to be delivered to.&lt;/p&gt;

&lt;h2 id=&quot;step-10--enjoy&quot;&gt;Step 10 : Enjoy!&lt;/h2&gt;

&lt;p&gt;End to end, getting my A2 motorcycle licence in France took the better part of 3 months, including the licence delivery it was more like 5 months. I had the blessing of having a flexible employment arrangement, and not failing any of the exams… any given failure could have set me back a month or more, as exam schedules are not extremely regular, or at least were not where I went.&lt;/p&gt;

&lt;p&gt;The TL:DR on all of this is that if you want to ride a motorcycle in France on a one year visa, you need to get to work on your licence as soon as you land, the process is not simple, and can be long.&lt;/p&gt;

&lt;p&gt;It only made sense to me of a particular set of circumstances, namely being a resident of a jurisdiction where getting a motorcycle permit is incredibly hard, long, and seasonally restricted, and that I am going to go back to France and/or Europe quite a lot in the foreseeable future.&lt;/p&gt;

&lt;p&gt;Having a driver’s licence that is permanent and recognized everywhere in the EU will likely be a time-saver in the long run, as it greatly facilitates buying a vehicle, getting insurance, and avoids having to getting an international drivers licence and/or a translated and notarized copy for certain jurisdictions.&lt;/p&gt;

&lt;p&gt;If it makes sense for you also and if you need help, please send me an email. If you’re that desperate, I’m sure you’ll find it despite it not being posted. I also welcome any suggestions for amendments.&lt;/p&gt;</content><author><name></name></author><category term="expat" /><category term="motorcycle" /><category term="licence" /><summary type="html">France is beautiful country, the only problem is that way too many french people live there. This will quickly become apparent to you once the novelty of being in a new country has worn off, and/or once you’ve stepped into the 16th pile of dog shit in any given week of being in a major French city.</summary></entry><entry><title type="html">Auto Backup for Unifi CloudKey</title><link href="https://maximerousseau.com/auto-backup-for-unifi-cloudkey/" rel="alternate" type="text/html" title="Auto Backup for Unifi CloudKey" /><published>2019-08-09T17:15:09+03:00</published><updated>2019-08-09T17:15:09+03:00</updated><id>https://maximerousseau.com/auto-backup-for-unifi-cloudkey</id><content type="html" xml:base="https://maximerousseau.com/auto-backup-for-unifi-cloudkey/">&lt;p&gt;Working with Ubiquiti gear is a wild ride; the ecstasy of deploying enterprise-grade gear for the borderline absurd prices that the Edge and Unifi lines enable is all to often ruined by the agony of buggy firmware, features that were promised on GA releases that are still not implemented 2 years later, and questionable business decisions regarding certain product lines. One of the recent frustrations I’ve had was&lt;a href=&quot;https://help.ubnt.com/hc/en-us/articles/360011480554-UniFi-Protect-FAQ#5&quot;&gt;being forced into buying a CloudKey+&lt;/a&gt; in order to run a fully updated version of Unifi Protect, after years of fully self-hosting all my stuff.&lt;/p&gt;

&lt;p&gt;While the bugs that I encountered since the 1st gen. CloudKey days seem to have been fixed, the problems caused by having a physical appliance running the controllers still presents problems regarding backups and service availability in case of a hardware-related issue. While all controllers now have an autobackup feature, the backup files are still hosted on the appliance; this really isn’t a backup in any meaningful sense of the word.&lt;/p&gt;

&lt;p&gt;If you want any sort of safety at all, you need to get those files off the appliance. ‌‌‌‌Luckily, the CloudKey is basically just a fancy ARM64 computer with a custom image of Debian on it, and it is still fairly extensible, so there are plenty of ways to pull the autobackup files off of the device.&lt;/p&gt;

&lt;p&gt;Since the autobackup file retention is managed from within the Unifi controller, all we really need to do is keep an updated copy of those files somewhere else, so I instinctively tried to run an RSYNC over SSH on the device. RSYNC failed, as the service isn’t installed by default on the Cloudkey, but installing this service is as easy as on any other linux device, as the regular Debian Stretch repos were not removed from the appliance. Get root SSH access and run the following commands:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;apt-get update &amp;amp;&amp;amp; apt-get install rsync&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;From there, you’ll need to configure the SSH access via password-less authentication on the CloudKey to enable rsync to do it’s job.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;cd /root&lt;br /&gt;
mkdir .ssh &amp;amp;&amp;amp; chmod 755 ./.ssh&lt;br /&gt;
touch ./.ssh/authorized_keys &amp;amp;&amp;amp; chmod 644 ./.ssh/authorized_keys&lt;br /&gt;
service sshd restart&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;On the machine that will be fetching the backup files (in my case, a FreeNAS box), copy your public key to allow password-less access:  &lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ssh-copy-id root@INSERT_CLOUDKEY_IP&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You can now pull backups in from another machine to grab the backups. &lt;a href=&quot;https://www.ixsystems.com/documentation/freenas/11.2/tasks.html?highlight=rsync#rsync-tasks&quot;&gt;FreeNAS has a GUI utility to&lt;/a&gt; help  you build RSYNC jobs, but a cron job would work just as well. The paths for the auto-backup folders are the following:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Unifi:&lt;/strong&gt; /srv/unifi/data/backup/autobackup/&lt;br /&gt;
&lt;strong&gt;Unifi Access:&lt;/strong&gt; /srv/unifi-access/workspace/backup/&lt;br /&gt;
&lt;strong&gt;Unifi Protect (configuration)&lt;/strong&gt;: /etc/unifi-protect/backups/&lt;br /&gt;
&lt;strong&gt;Unifi Protect (video files):&lt;/strong&gt; /srv/unifi-protect/video/&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;These paths only backup the configurations. Seeing that a lot of the problems I’ve had in the past with the Unifi controller was related to the MongoDB backend, I decided that it was probably wiser not to try pulling files from a live database. If the Unifi service was stopped, I don’t see why you couldn’t copy the entire application folder, logs, database and all.&lt;/p&gt;</content><author><name></name></author><category term="unifi" /><category term="ubiquiti" /><category term="rsync" /><category term="cloudkey" /><category term="backup" /><summary type="html">Working with Ubiquiti gear is a wild ride; the ecstasy of deploying enterprise-grade gear for the borderline absurd prices that the Edge and Unifi lines enable is all to often ruined by the agony of buggy firmware, features that were promised on GA releases that are still not implemented 2 years later, and questionable business decisions regarding certain product lines. One of the recent frustrations I’ve had wasbeing forced into buying a CloudKey+ in order to run a fully updated version of Unifi Protect, after years of fully self-hosting all my stuff.</summary></entry><entry><title type="html">Standard TOTP 2nd Factor Authentication (2FA) on AzureAD and Office 365</title><link href="https://maximerousseau.com/standard-totp-2nd-factor-authentication-2fa-on-azuread-and-office-365/" rel="alternate" type="text/html" title="Standard TOTP 2nd Factor Authentication (2FA) on AzureAD and Office 365" /><published>2019-04-07T02:59:37+03:00</published><updated>2019-04-07T02:59:37+03:00</updated><id>https://maximerousseau.com/standard-totp-2nd-factor-authentication-2fa-on-azuread-and-office-365</id><content type="html" xml:base="https://maximerousseau.com/standard-totp-2nd-factor-authentication-2fa-on-azuread-and-office-365/">&lt;p&gt;I recently migrated from Google Apps to Office 365 for my personal emails, and seeing that I wanted to more or less replicate exactly what I had with Google, on the elements on my migration checklist was setting up 2FA.&lt;/p&gt;

&lt;p&gt;Sadly, 2FA is another place where Microsoft tried to reinvent the wheel and put out an Authenticator app of their own, completely disregarding the fact that standard TOTP works perfectly fine, totally secure, and familiar to anybody who gives half a hoot about security.  &lt;/p&gt;

&lt;p&gt;Seeing this, I went scouring through the internet to find an alternative way of doing 2FA, hopefully through FIDO/FIDO2, but sadly this is not yet supported. I did land however on the &lt;a href=&quot;https://support.yubico.com/support/solutions/articles/15000016486-using-yubikeys-with-azure-mfa#Uploading_OATH_Tokens42gbwp&quot;&gt;Yubikey support docs regarding 2FA on Office 365 and AzureAD&lt;/a&gt;, which mentionned the possibility of generating standard TOTP. The docs in question show multiple 2FA options checked, and a user-facing option to “configure app without notifications”.&lt;/p&gt;

&lt;figure class=&quot;kg-card kg-image-card kg-card-hascaption&quot;&gt;&lt;img src=&quot;/content/images/2019/04/Lf6QPMAB80FyvD2XFitRiFT7FvU4NJw4ew.png&quot; class=&quot;kg-image&quot; /&gt;&lt;figcaption&gt;Admin-facing 2FA configuration.&lt;/figcaption&gt;&lt;/figure&gt;
&lt;figure class=&quot;kg-card kg-image-card kg-card-hascaption&quot;&gt;&lt;img src=&quot;/content/images/2019/04/O0871n5RTCnqGBDM3B5fZ1rURt0CwVY5yA-1.png&quot; class=&quot;kg-image&quot; /&gt;&lt;figcaption&gt;User-facing 2FA configuration procedure. &lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;Things aren’t exactly like this anymore, probably an attempt by Microsoft to steer users to their own app.&lt;/p&gt;

&lt;p&gt;To get the standard TOP, you HAVE to uncheck all other options; the Microsoft OTP app and standard OTP simply cannot coexist. Here is how my Azure 2FA configuration is setup, available in the 365 admin center in Users -&amp;gt; Active Users -&amp;gt; More -&amp;gt; Multifactor Authentication setup -&amp;gt; Service Settings.&lt;/p&gt;

&lt;figure class=&quot;kg-card kg-image-card&quot;&gt;&lt;img src=&quot;/content/images/2019/04/Screen-Shot-2019-04-06-at-10.23.32-PM.png&quot; class=&quot;kg-image&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;Special care with this configuration is to be taken if this method is used since you have no failover in case your OTP info is not available. If I’m honest, phone-based 2FA is not something I’m too keen on activating anyways, considering the amount of hack attemps that I’ve seen, in the bitcoin sphere specifically. On iOS, OTP auth allows you to export the OTP seed, which I have backed up physically, and configured on more than one device. That seems like a much better way of doing things.&lt;/p&gt;

&lt;p&gt;More advanced plans of Azure AD provide more flexiblity for third-party MFA providers, but I haven’t tested it yet. Passwordless is supposedly available only with Azure AD Premium subscriptions, and at 5$ a month per user, pricing seems a bit steep. In the meantime, you can still use &lt;a href=&quot;https://www.yubico.com/products/services-software/download/yubico-authenticator/&quot;&gt;Yubico’s excellent OTP app&lt;/a&gt; and one of their keys if you want a hardware element integrated to you login routines.&lt;/p&gt;</content><author><name></name></author><category term="microsoft" /><category term="windows" /><category term="otp" /><category term="azureus" /><category term="active-directory" /><category term="yubico" /><category term="yubikey" /><category term="ad" /><summary type="html">I recently migrated from Google Apps to Office 365 for my personal emails, and seeing that I wanted to more or less replicate exactly what I had with Google, on the elements on my migration checklist was setting up 2FA. Sadly, 2FA is another place where Microsoft tried to reinvent the wheel and put out an Authenticator app of their own, completely disregarding the fact that standard TOTP works perfectly fine, totally secure, and familiar to anybody who gives half a hoot about security.  </summary></entry><entry><title type="html">Quitter la plantation</title><link href="https://maximerousseau.com/quitter-la-plantation/" rel="alternate" type="text/html" title="Quitter la plantation" /><published>2019-03-12T02:32:14+03:00</published><updated>2019-03-12T02:32:14+03:00</updated><id>https://maximerousseau.com/quitter-la-plantation</id><content type="html" xml:base="https://maximerousseau.com/quitter-la-plantation/">&lt;p&gt;Aujourd’hui, Catherine Fournier a quitté la politique pour les bonnes raisons, et va probablement en payer le prix d’une défaite électorale cuisante aux prochaines élections provincials, en plus de se faire allégrement invectiver jusqu’à la fin de son mandat.&lt;/p&gt;

&lt;p&gt;Quand on lit les commentaires sur le &lt;a href=&quot;https://twitter.com/CathFournierQc/status/1105065469344706563&quot;&gt;statut Twitter qui annonce son départ du PQ&lt;/a&gt; ou le &lt;a href=&quot;https://twitter.com/CathFournierQc/status/1105168906803662849&quot;&gt;tweet subséquent&lt;/a&gt;, on comprend rapidement pourquoi elle quitte. La tempête de boomer qui l’accuse de trahison donne entièrement raison à sa démarche, qui pourtant a été présentée d’une manière qui n’aurait pas pu être plus prudente et respectueuse. Son intention est facile à comprendre: elle quitte pour explorer les avenues possible pour l’accession à la souverainté, sans les restrictions associées à une affiliation partisane. Le mouvement souverainiste qui est bien connu pour la décapitation sommaire de ses chefs et des luttes de pouvoir internes qui semblent franchement désagréables; peut-on vraiment lui reprocher de vouloir opérer hors de cet environnement?&lt;/p&gt;

&lt;p&gt;Tous les babounes de boomer sont prévisibles quand ont connait un tant soit peu la culture politique du Québec. &lt;em&gt;Extra Ecclesiam nulla salus&lt;/em&gt;: la politique d’un peuple soumis, incapable d’imaginer quoi que ce soit hors des institutions qui lui est familier, préférant le connu de l’étreinte oppressive (selon l’historiographie officielle, de l’Église, mais aussi et surtout de l’État et de ses agents) aux possibilités qu’offre la liberté de toute contraint de nature politique.  &lt;/p&gt;

&lt;p&gt;Si les souverainistes n’étaient pas trop occupés à rendre publique sur Twitter leur syndrome de Stockholm pour un parti qui ne leur a rien livré depuis des dizaines d’années et dont la fenêtre d’opportunité se ferme à un rythme effarant, ils aurait pu faire une analyse sobre de la situation. Premièrement, Catherine n’est évidamment pas moins souveraineté qu’avant, et rien n’indique qu’elle sera un obstacle au PQ, que ce soit en chambre ou dans ses démarches de communication. Dans son discours et dans ses réponses aux questions lors de sa présentation d’aujourd’hui, même le pire des cyniques ne pourrait entrevoir une volonté de s’engager dans un messianisme souverainiste à la sauce Aussant et de faire directement compétition au PQ. Des putschs comme ça, ça s’organise en groupe. Deuxièmement, elle ne le fait clairement pas pour l’avancement de sa propre carrière politique. Pour les raisons de culture politique que j’ai soulevées ci-haut, elle vient à tout fin pratique de s’assurer une défaite au prochain cycle, alors qu’elle aurait pu facilement faire comme la majorité des péquistes seniors et se présenter à l’AssNat pour mandat par-dessus mandat, impuissant sinon que pour faire des shows de boucane, seuls mécanismes par lesquels les partis sans pouvoir peuvent se convaincre qu’ils sont pertinents.&lt;/p&gt;

&lt;p&gt;En politique, l’apostasie est pire que la non-croyance. La perte d’une des wonderchild du PQ, la plus jeune femme élue à l’Assemblée Nationale, un symbole de renouveau dans un parti moribond où l’on compte plus de nez de gin que de femmes dans le fleur de l’âge, c’est une grosse perte. Quand en plus elle ÔSE critiquer le parti qui, justement, allait ENFIN amorcer LA transformation interne qui cette fois-ci serait définitivement la bonne et allait assurément reconquérir les Québécois, s’en est trop. J’espère que ma dérision de la réponse du PQ transpire malgré ma plume médiocre.&lt;/p&gt;

&lt;p&gt;Possiblement que je projette ma propre évolution politique, mais je pense que nous voyons les conséquences d’une prise de conscience fondamentale sur la nature de la politique chez Catherine. Si elle ne l’avait pas compris avant de quitter le PQ, les prochaines années en tant que &lt;em&gt;persona non grata&lt;/em&gt; du mouvement indépendantiste l’amèneront assurément au constat suivant: par définition, la politique n’est PAS un milieux propice à l’échange d’idées. Il n’y a aucune place pour la dissension dans la politique institutionnalisée; on doit toujours fléchir le genou à quelqu’un, si ce n’est pas à un parti, c’est à l’électeur lambda… je vous épargne ma description de ce dernier. Je ne saurais dire quel est le pire.&lt;/p&gt;

&lt;p&gt;Pour s’émanciper “en tant que peuple” comme le prétendent les nationalistes, se séparer du Canada est insuffisant; il faut aussi s’émanciper de la politique elle-même. Catherine,&lt;a href=&quot;https://www.youtube.com/watch?v=qc_8jcHYBis&amp;amp;t=1m4s&quot;&gt;comme Kanye&lt;/a&gt;, a quitté la plantation; elle en payera le prix, mais je ne peux qu’applaudir son geste.&lt;/p&gt;</content><author><name></name></author><category term="politique" /><category term="parti-quebecois" /><category term="quebec" /><category term="catherine-fournier" /><category term="independance" /><category term="souverainte" /><summary type="html">Aujourd’hui, Catherine Fournier a quitté la politique pour les bonnes raisons, et va probablement en payer le prix d’une défaite électorale cuisante aux prochaines élections provincials, en plus de se faire allégrement invectiver jusqu’à la fin de son mandat. Quand on lit les commentaires sur le statut Twitter qui annonce son départ du PQ ou le tweet subséquent, on comprend rapidement pourquoi elle quitte. La tempête de boomer qui l’accuse de trahison donne entièrement raison à sa démarche, qui pourtant a été présentée d’une manière qui n’aurait pas pu être plus prudente et respectueuse. Son intention est facile à comprendre: elle quitte pour explorer les avenues possible pour l’accession à la souverainté, sans les restrictions associées à une affiliation partisane. Le mouvement souverainiste qui est bien connu pour la décapitation sommaire de ses chefs et des luttes de pouvoir internes qui semblent franchement désagréables; peut-on vraiment lui reprocher de vouloir opérer hors de cet environnement?</summary></entry><entry><title type="html">Fixing a Bricked Unifi Security Gateway (USG)</title><link href="https://maximerousseau.com/fixing-a-bricked-unifi-security-gateway-usg/" rel="alternate" type="text/html" title="Fixing a Bricked Unifi Security Gateway (USG)" /><published>2018-09-13T01:37:17+03:00</published><updated>2018-09-13T01:37:17+03:00</updated><id>https://maximerousseau.com/fixing-a-bricked-unifi-security-gateway-usg</id><content type="html" xml:base="https://maximerousseau.com/fixing-a-bricked-unifi-security-gateway-usg/">&lt;p&gt;I thought I was being real smart when I hooked up an eBay-bought 802.11af-compliant 12v POE extractor to my Unifi Security Gateway. The whole idea was to get rid of all the power-warts and AC-DC conversion devices hanging off my UPS to make the makeshift rack in my parent’s basement cleaner, in addition to making my router power-resettable through the Unifi control panel.&lt;/p&gt;

&lt;p&gt;This genius scheme worked fine for the better part of a year, before this summer’s grueling heat took it’s toll on the extractor. Naturally, this all took place while I was thousands of kilometers away; luckily, power resets and cooling off the adaptor worked for a while, but at a certain point it gave up the ghost entirely, still drawing current from the switch but making a horrible pulsing sound.&lt;/p&gt;

&lt;p&gt;The erratic power delivery was not very well received by my USG, which decided that it would no longer boot correctly, or really boot at all for that matter. The behaviour of the device was as follows:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Interface lights would light up as per normal during the boot sequence&lt;/li&gt;
  &lt;li&gt;Status LED would NOT light up at all, not even giving the usual boot-time flashing white&lt;/li&gt;
  &lt;li&gt;As one would expect, the device would not ping or connect over SSH. A Wireshark scan also showed that it didn’t seem to set the LAN interface IP either to it’s last known provisionned value, or default value.&lt;/li&gt;
  &lt;li&gt;Any form of reset, including a 30-30-30 reset would do absolutely nothing.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Browsing the UBNT Community forums showed that this was most likely a corrupt USB drive. The firmware on these devices is stored on a 4GB USB stick plugged in internally, as pictured here.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/content/images/2018/09/IMG_2439.JPG&quot; alt=&quot;IMG_2439&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Luckily, I had a fresh, out-of-box sample USG with the board entirely out that I had bought to mock up in CAD for some bracket work I wanted to get done. I copied the fresh flash drive to my Mac using DD, imaged it back to the defective USB drive, plugged everything back in and got things working again. After about of minute of what is probably first-use initialisation on post-recovery power-on, the white light status light started flashing, and within normal booting time switch to solid, at which time the device had set it’s default IP address on the LAN interface and was accessible through it’s web UI.&lt;/p&gt;

&lt;p&gt;The USB drive has the following partition layout: 
&lt;img src=&quot;/content/images/2018/09/Unifi-USB-Drive.png&quot; alt=&quot;Unifi-USB-Drive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I’m honestly surprised that it was decided to use a USB drive to hold the software. I’ve had tremendously bad luck with putting bootable software on USB drives; all my BSD-based appliances ate drives at a rate where I quickly found myself using 3 or 4 drive mirror setups to make sure that drive failure wouldn’t break my stuff. However, the advantage is that I didn’t have to break out a serial cable for some complicated console-based restore process, which is fine by me since just FINDING my serial adaptor would have been much longer than DD’ing a 4GB flash drive was.&lt;/p&gt;

&lt;p&gt;Recognizing the uncanny way in which I somehow dodged Murphy’s Law by having a fresh spare on hand, I decided to thank the IT gods by making the image available here. Version info on the restore device told me this is firmware v4.3.33, the older-style firmware with less configurtion options available to an un-adopted device.&lt;/p&gt;

&lt;p&gt;You can download the image &lt;a href=&quot;http://https://drive.google.com/open?id=1B4NQOPfr73h20nbkWwLqWpxrGINYdMLG&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Checksum is as follows:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;MD5 (UniFiSecurityGateway.ER-e120.v4.3.33.4936086.161203.2031.img) = 83941494d4f9f9fb906e19b8ecf68696&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You can DD this image directly without specifying any block size, which worked just fine for me.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;IMPORTANT NOTE ON COMPATIBILITY&lt;/strong&gt;: I am unaware of any potential incompatiblities with hardware or low-level firmware between the software I uploaded and whatever your USG might be running. What I know is that there did not appear to be incompatibility issues going from firmware 4.4.22 back down to 4.3.33. Use at your own risk. Both units used a PCB that was marked “Copyright 2014”, despite being purchased years from one another.&lt;/p&gt;

&lt;p&gt;Bottom line: Power matters. If you want to centralize power, get a decent rackmount power supply in the appropriate voltages, and if control is what you want, get a relay setup.&lt;/p&gt;</content><author><name></name></author><category term="unifi" /><category term="security" /><category term="gateway" /><category term="networking" /><category term="repair" /><summary type="html">I thought I was being real smart when I hooked up an eBay-bought 802.11af-compliant 12v POE extractor to my Unifi Security Gateway. The whole idea was to get rid of all the power-warts and AC-DC conversion devices hanging off my UPS to make the makeshift rack in my parent’s basement cleaner, in addition to making my router power-resettable through the Unifi control panel.</summary></entry><entry><title type="html">FreeNAS + RancherOS, my NAS Docker Stack</title><link href="https://maximerousseau.com/freenas-rancheros-my-nas-docker-stack/" rel="alternate" type="text/html" title="FreeNAS + RancherOS, my NAS Docker Stack" /><published>2018-04-09T01:14:41+03:00</published><updated>2018-04-09T01:14:41+03:00</updated><id>https://maximerousseau.com/freenas-rancheros-my-nas-docker-stack</id><content type="html" xml:base="https://maximerousseau.com/freenas-rancheros-my-nas-docker-stack/">&lt;p&gt;I’ve been a FreeNAS user since the 8.x days, having decided to ditch a self-hosted file server based off Fedora with a pretty basic MDADM + ext3fs storage setup. Running on commodity hardware, the prior setup was fine, but little other than an extensible NAS that was somewhat of a hassle to manage and keep updated. FreeNAS and it’s plugins jails promised to do most of what I was doing beforehand, in an appliance format that is much easier to maintain.&lt;/p&gt;

&lt;p&gt;FreeNAS Corral, aka FreeNAS 10, was supposed to bring native Docker support to the product with the help of a built-in Bhyve + boot2docker setup built right into the new UI. While jails are technically as flexible as FreeBSD and the &lt;a href=&quot;https://www.freebsd.org/ports/&quot;&gt;ports library&lt;/a&gt; are, plugins-jails are a bit more complicated and you are generally dependant on a maintainer for updates. Case in point: as of my writing of this, the PBI jail for Owncloud is stuck at 9.1.2, dating back to November of 2016. To compare, my docker instance of Owncloud is currently on 10.0.7.&lt;/p&gt;

&lt;p&gt;Plugin jails have been helpful for me and countless others, but it’s time to admit that Docker is just better at doing what the original system set out to do. Here’s what I’ve done to transition to Docker on FreeNAS.&lt;/p&gt;

&lt;h2 id=&quot;setup&quot;&gt;Setup&lt;/h2&gt;

&lt;p&gt;Setup is &lt;a href=&quot;http://doc.freenas.org/11/vms.html#docker-rancher-vm&quot;&gt;pretty straight-forward and well-documented in the FreeNAS docs&lt;/a&gt;, however it is described in a very procedural fashion which doesn’t really give you any insight of what is being done behind the scene. This makes it very confusing when things break; I was pulling my hair out for hours because of a &lt;a href=&quot;https://forums.freenas.org/index.php?threads/freenas-11-1-rancher-server-installation-failed.59898/&quot;&gt;corrupt download not completing&lt;/a&gt;. For thoroughness’ sake, here is an overview of what following the steps in the guide accomplishes:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Creates a Bhyve VM&lt;/li&gt;
  &lt;li&gt;Creates a RAW drive image that will be used for storage&lt;/li&gt;
  &lt;li&gt;Downloads the RancherOS image and flashes it (dd?) to your drive image to make it bootable&lt;/li&gt;
  &lt;li&gt;Creates a basic RancherOS configuration file from the options entered in the additional options entered in the storage device menu.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you can’t get a serial console or can’t get the machine to boot properly, remember this order and use it to diagnose. This should be obvious, but the recommendations regard the provisioning of CPU and RAM resources are just that; depending on what you intend on running within your Docker VM, assign system ressources as necessary. In my case, assigning just one VCPU held back &lt;a href=&quot;https://hub.docker.com/r/ruimarinho/bitcoin-core/&quot;&gt;my bitcoin node&lt;/a&gt; from properly syncing. Adding another one fixed the problem and made all the services running in containers visibly more snappy.&lt;/p&gt;

&lt;p&gt;A word of warning on giving the VM more system ressources: I had problems giving the machine more than 2 virtual CPUs; the machine seems to want to boot up, with Bhyve init stuff showing up on the serial console, but the OS stalled shortly before all the services could go up.&lt;/p&gt;

&lt;h2 id=&quot;storage&quot;&gt;Storage&lt;/h2&gt;

&lt;p&gt;The modularity of Docker is what makes its strength, but in order to be truly useful, if must be built on a stack that is itself just as modular. For example, in continuity with the spirit of containerizing, I aught to be able to be able to snapshot and replicate individual containers to back them up locally or offsite. Storing everything on the raw disk image just isn’t compatible with that vision of things.&lt;/p&gt;

&lt;p&gt;You could store everything on ZFS vdevs through additional VM volume assignments, but then you &lt;a href=&quot;http://jrs-s.net/2016/06/16/psa-snapshots-are-better-than-zvols/&quot;&gt;lose the ability to snapshot under certain conditions&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Rancher has &lt;a href=&quot;https://github.com/rancher/convoy&quot;&gt;convoy&lt;/a&gt; that can make docker volumes persistent, and store them on a variety of backends, but the additional layer of docker-style volumes doesn’t really need to be there.&lt;/p&gt;

&lt;p&gt;I opted instead to use &lt;a href=&quot;https://hub.docker.com/r/d3fk/nfs-client/&quot;&gt;nfs-client&lt;/a&gt; and bind-mounts in my containers to my install of FreeNAS, &lt;a href=&quot;https://forums.freenas.org/index.php?threads/howto-freenas-11-rancheros-docker-and-portainer.54595/&quot;&gt;with the method detailed here&lt;/a&gt;. I modified the steps to fit my application slightly. First of all, I elected to created a child dataset for every container, in order to be able to snapshot and replicate as mentionned above. Secondly, I had to make seperate NFS shares for each container, since NFS will not traverse nested datasets as one would expect. With this larger amount of shares, listing the NFS mounts was done directly in my cloud-config.yml file, as so.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/content/images/2018/03/nfsmounts.png&quot; alt=&quot;nfsmounts&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You might be tempted to use SMB, which is also supported by RancherOS; this isn’t a good idea if you plan on running any container that includes Apache because it is heavily reliant on UNIX-style permissions to function properly, and that just won’t translate over SMB.&lt;/p&gt;

&lt;h2 id=&quot;networking-and-security&quot;&gt;Networking and security&lt;/h2&gt;

&lt;p&gt;Using NFS as a link between your Docker VM and your ZFS storage introduces security problems caused by the ways that RancherOS and NFS works. First of all, RancherOS runs all it’s Docker processes as root along with the NFS client; secondly, NFSv3 uses client-side info on the user accessing the share to determine if it has the permission to access the share or not. All this means that you will have to disable root squashing for things to work; I went about this by adding root/wheel to the maproot user/group fields in the advanced settings of my NFS shares.&lt;/p&gt;

&lt;p&gt;This is obviously horrible security, because any rogue machine can now access your shares as root if your client ACLs are too loose. The way around this is making sure that the network access to the address that the NFS service is bound to is impossible for everything but your Docker VM. The advanced settings of the individual NFS shares provide a client allow list, which you should use to whitelist ONLY your VM with its IP.&lt;/p&gt;

&lt;p&gt;The ideally you’d also want to use a dedicated network bridge to pass the traffic off between your storage and the VM. The problem is that the web UI does not show you bridge interfaces when offering you the options for VM NIC mapping; my workaround was to plug in a dead-end VLAN in an unused interface on my server, and have all the Docker-related traffic come in through this interface.&lt;/p&gt;

&lt;h3 id=&quot;a-note-on-pre-111-u2&quot;&gt;A note on pre-11.1-U2&lt;/h3&gt;

&lt;p&gt;Going from one reboot to the next in the 11.1 series of releases (not U2 though), I’ve gotten weird networking issues where the networking interface(s) used by the RancherOS instance would not bind to the correct NIC, making connection to the NAS-provided storage or to the rest of the network impossible. Digging around in the bug tracker, it seems that &lt;a href=&quot;https://redmine.ixsystems.com/issues/27122&quot;&gt;the way VM NICs are bridge may be sub-optimal&lt;/a&gt;. If you are experiencing weird issues after configuring your networking in the RancherOS VM, check your network configuration with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ifconfig&lt;/code&gt;. You should get something like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/content/images/2018/03/freenasifbridge.png&quot; alt=&quot;freenasifbridge&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The TAP interface is the host-side NIC that gives your VM network access. In my setup, the VLAN interface is the parent interface that can be found in the ==Devices/NIC== menu of the VM. If the binding is properly made, the bridge should group those two interfaces together. If you have many TAP interfaces and bridges that you can’t make sense of, upgrade to 11.1-U2 and reboot, things should clean up.&lt;/p&gt;

&lt;h2 id=&quot;managing-docker&quot;&gt;Managing Docker&lt;/h2&gt;

&lt;p&gt;RancherOS kind of suggests that using Rancher to manage your containers might be a good idea, but it seemed a bit clumsy and overkill for a single host setup. I instead opted for &lt;a href=&quot;https://portainer.io&quot;&gt;Portainer&lt;/a&gt;, which I was somewhat already familiar with and is much less intimidating to use and deploy, seeing that it’s really just a nice front end for the docker commands you you know and love.&lt;/p&gt;

&lt;p&gt;At the RancherOS command line, run the installation one-liner on the Portainer website, subsituting bind mounts for the volume if necessary, and adding the restart policy if you so desire. Provided the restart-policy is ok, Portainer will start up with RancherOS bootup.&lt;/p&gt;

&lt;h2 id=&quot;monitoring&quot;&gt;Monitoring&lt;/h2&gt;

&lt;p&gt;I’ve been building a monitoring system on the &lt;a href=&quot;https://www.influxdata.com/blog/introduction-to-influxdatas-influxdb-and-tick-stack/&quot;&gt;TICK stack&lt;/a&gt; for my home setup, and as it turns out Docker monitoring is quite simple. &lt;a href=&quot;https://github.com/influxdata/telegraf/tree/master/plugins/inputs/docker&quot;&gt;Telegraf has a plugin specifically for docker monitoring&lt;/a&gt;, just spin up a Telegraf instance with the docker.sock endpoint mapped through, configure the config file, and you’re good to go.&lt;/p&gt;

&lt;p&gt;With the &lt;a href=&quot;https://github.com/influxdata/influxdb/blob/master/services/graphite/README.md&quot;&gt;intergrated Graphite listener&lt;/a&gt; enabled and the ports open, you can also configure FreeNAS to output its metrics to Influx aswell… your Influx instance can of course be within docker if you so desire.&lt;/p&gt;

&lt;p&gt;If you want better insights into your NAS’ performance and don’t have a monitoring setup built up, this “FreeNAS monitoring on itself” is not a bad choice, particularly if your FreeNAS server is your only machine.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;If you run anything critical, you might want to run a dedicated docker host. However, if you have spare CPU cycles and memory (although with ZFS, it could be argued that there is no such thing as “spare memory”), why not? Docker absolutely seems like a viable replacement for plugin-jails, and if your FreeNAS box is a backup repo for databases hosted elsewhere, you can now run replication services in containers instead pushing dumps.&lt;/p&gt;

&lt;p&gt;I just wish that Docker was native to the base OS, and that the Bhyve + RancherOS + NFS stack could be avoided. Limits on provisionning hardware are also a bit problematic, but it is what it is. There’s a Docker container for everything… have at it!&lt;/p&gt;</content><author><name></name></author><summary type="html">I’ve been a FreeNAS user since the 8.x days, having decided to ditch a self-hosted file server based off Fedora with a pretty basic MDADM + ext3fs storage setup. Running on commodity hardware, the prior setup was fine, but little other than an extensible NAS that was somewhat of a hassle to manage and keep updated. FreeNAS and it’s plugins jails promised to do most of what I was doing beforehand, in an appliance format that is much easier to maintain.</summary></entry><entry><title type="html">Easy Fix for Dead Unifi AC-Lite Access Points</title><link href="https://maximerousseau.com/easy-fix-for-dead-unifi-ac-lite-access-points/" rel="alternate" type="text/html" title="Easy Fix for Dead Unifi AC-Lite Access Points" /><published>2017-11-07T01:21:09+03:00</published><updated>2017-11-07T01:21:09+03:00</updated><id>https://maximerousseau.com/easy-fix-for-dead-unifi-ac-lite-access-points</id><content type="html" xml:base="https://maximerousseau.com/easy-fix-for-dead-unifi-ac-lite-access-points/">&lt;p&gt;I’ve been deploying Ubiquiti’s Unifi gear for a while and I absolutely love it. While the development cycle of firmware and software is somewhat uneven, the products are great, inexpensive, run off a self-hosted management portal and don’t have any licensing costs attached to them.&lt;/p&gt;

&lt;p&gt;Except for firmware-induced hiccups, I haven’t heard anything more than anecdotal evidence of systematic failure or any product in their line. One dealer told me of an issue with early SKU 24 port 150W switches’ POE modules, but that’s about it. I personally have had my first failure on ANY Unifi product this week when a UAP-AC-LITE shit the bed, failing to power-on with any POE source. Other symptoms included flashing light on the passive power injector, and a short flash of the white LED if the reset button was held in with the power-injector connected.&lt;/p&gt;

&lt;p&gt;Turns out the problem has already been documented, and comes from a TVS diode in the power circuit that blows up; &lt;a href=&quot;https://www.ifixit.com/Guide/Ubiquiti+UniFi+AP+AC+Lite+TVS+Diode+Replacement/73360&quot;&gt;a kind fellow on iFixit has already documented a fix&lt;/a&gt;. Sure enough, this is exactly how mine broke.&lt;/p&gt;

&lt;p&gt;The guide says that the diode is there to protect other components, but it’s unclear if the failure is due to a cheap component or if it is provoked by some particular incident. In my setup, the AP was powered by a Unifi US-8-150W switch, which itself was connected to a high quality UPS; the likelyhood of a power-related incident is low. There has been an acknowledged bug in firmware in the past that has made certain 24V devices get 48V during reboots, but this problem is long since fixed, or at least this was my impression. &lt;a href=&quot;https://community.ubnt.com/t5/UniFi-Routing-Switching/UniFi-Switch-24v-Passive-PoE/m-p/2103593/highlight/true#M61755&quot;&gt;This post&lt;/a&gt; seems to indicate that there is no fix. Having missed the &lt;a href=&quot;https://community.ubnt.com/t5/UniFi-Wireless/Warning-UAP-AC-LITE-and-UAP-AC-LR-with-UniFi-Switch-on-PoE/m-p/1771809#U1771809&quot;&gt;original announcement and the giveaway of 802.3af adapters&lt;/a&gt;, I’ve missed the boat.&lt;/p&gt;

&lt;p&gt;I’ve reached out to UBNT for warranty support, and they don’t seem to have any intention to warranty this kind of fault, or to admit that the diode blowing up is the expected mode of failure.&lt;/p&gt;

&lt;p&gt;This might be good news for deal hunters with connections to recyclers. Considering that the AP is the lowest-end AC offering in the Unifi lineup and that there are quite possibly tens of thousands of affected units in the wild, a spool of diodes for a few bucks and a cheap broken APs might be a terrific score for somebody intending to use the APs without a POE switch, or with a seperated 802.3af adaptor. The AC-Lite was a terrific deal at it’s inital MSRP, and remains one of the most competitive offerings even in it’s later 48V, 802.3af compliant version priced the same at around 100$.&lt;/p&gt;</content><author><name></name></author><category term="ubnt" /><category term="ubiquiti" /><category term="networking" /><category term="no-power" /><category term="ac-lite" /><category term="repair" /><summary type="html">I’ve been deploying Ubiquiti’s Unifi gear for a while and I absolutely love it. While the development cycle of firmware and software is somewhat uneven, the products are great, inexpensive, run off a self-hosted management portal and don’t have any licensing costs attached to them.</summary></entry><entry><title type="html">Rona, le fisc et la dérive de fonction - Prince Arthur Herald</title><link href="https://maximerousseau.com/rona-le-fisc-et-le-mission-creep/" rel="alternate" type="text/html" title="Rona, le fisc et la dérive de fonction - Prince Arthur Herald" /><published>2017-08-18T02:46:16+03:00</published><updated>2017-08-18T02:46:16+03:00</updated><id>https://maximerousseau.com/rona-le-fisc-et-le-mission-creep</id><content type="html" xml:base="https://maximerousseau.com/rona-le-fisc-et-le-mission-creep/">&lt;blockquote&gt;
  &lt;p&gt;Bien peu de gens y verrons un problème à ce que Rona soit défait en cour. La défenderesse est une compagnie, un monstre sans visage ayant comme seule motivation le profit; dans un cas traitant d’évasion fiscale, son opposition est suspecte au mieux. Pourtant, l’enjeux me semble plus large: devrais-t-on imposer à grand coûts le travail d’être un délateur fiscal? Au-delà de l’information habituellement contenue dans le rapport d’impôt, quelle information le fisc peut-il nous exiger de remettre? Si un de mes proches est sujet d’un audit, quelle sorte de “renseignements ou documents” serais-je contraint de fournir? Combien d’heures non-rémunérés m’obligeront-ils à travailler pour faire le recensement de ces renseignements? Voulons-nous vraiment d’une société de snitch?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;http://princearthurherald.com/fr/affaires-2/rona-le-fisc-et-la-derive-de-fonction-maxime-rousseau&quot;&gt;Lire l’article sur le site du Prince Arthur Herald&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><category term="prince-arthur-herald" /><category term="rona" /><category term="fisc" /><category term="revenu-canada" /><category term="vie-privee" /><summary type="html">Bien peu de gens y verrons un problème à ce que Rona soit défait en cour. La défenderesse est une compagnie, un monstre sans visage ayant comme seule motivation le profit; dans un cas traitant d’évasion fiscale, son opposition est suspecte au mieux. Pourtant, l’enjeux me semble plus large: devrais-t-on imposer à grand coûts le travail d’être un délateur fiscal? Au-delà de l’information habituellement contenue dans le rapport d’impôt, quelle information le fisc peut-il nous exiger de remettre? Si un de mes proches est sujet d’un audit, quelle sorte de “renseignements ou documents” serais-je contraint de fournir? Combien d’heures non-rémunérés m’obligeront-ils à travailler pour faire le recensement de ces renseignements? Voulons-nous vraiment d’une société de snitch?</summary></entry><entry><title type="html">Raid-Proof Your FreeNAS with USBKill</title><link href="https://maximerousseau.com/raid-proof-your-freenas-with-usbkill/" rel="alternate" type="text/html" title="Raid-Proof Your FreeNAS with USBKill" /><published>2017-07-30T19:33:32+03:00</published><updated>2017-07-30T19:33:32+03:00</updated><id>https://maximerousseau.com/raid-proof-your-freenas-with-usbkill</id><content type="html" xml:base="https://maximerousseau.com/raid-proof-your-freenas-with-usbkill/">&lt;p&gt;By virtue of being a very multi-functional appliance in most settings, a FreeNAS machine has the potential to be a very sensible part of your rack. Even if you don’t use jails or VMs to host anything, it’s still a fileserver at the bare minimum, which means it hosts your data. I don’t think I need to emphasize that protecting your data is important. FreeNAS being built on ZFS, the appliance integrates robust encryption from the get-go, but disk encryption alone leaves several attack vectors wide-open.&lt;/p&gt;

&lt;p&gt;The most important of these attack vectors, as tragically highlighted by cases of Ross Ulbricht and Alexandre Cazes (of Silkroad and Alphabay infamy, respectively) is physical security. It’s one of the first mantras of computer security I’ve memorized: “If you’ve got physical control over it, it’s owned.” Good luck getting any data out of an encrypted ZFS dataset on a powered down system, but on a live box? There are ways. By default, you can reset the root password from the console. Even if that’s disabled, advanced enough intruders (read: state actors) have the means of poking and proding until they find a way.&lt;/p&gt;

&lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-9587657333914786&quot; data-ad-slot=&quot;6494385734&quot;&gt;&lt;/ins&gt;
&lt;script&gt;
     (adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Short of &lt;a href=&quot;https://www.youtube.com/watch?v=-bpX8YvNg6Y&quot;&gt;physically detonating your servers&lt;/a&gt; upon detection of intrusion, there is still a way of minimizing the possibility of intrusion by using tools like USBKill.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/hephaest0s/usbkill&quot;&gt;original USBKill was written by Github user hephaest0s&lt;/a&gt; with the specific case of Ulbricht in mind, and is basically a USB peripheral watchdog that shuts down your machine as soon as it detects a change in connected peripherals. With config file tweaks, you can also run any amount of arbitrary commands and clear swap memory and RAM.&lt;/p&gt;

&lt;h2 id=&quot;adapting-usbkill-to-freenas&quot;&gt;Adapting USBKill to Freenas&lt;/h2&gt;
&lt;p&gt;Since USBKill is comprise of a single file of Python, and officially supports FreeBSD, there were high chances that USBKill would work out of the box with FreeNAS. Unfortunately, FreeNAS does not ship with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lsusb&lt;/code&gt; which is a used by USBKill, so it had to be adapted to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;usbconfig&lt;/code&gt; which does come preinstalled.&lt;/p&gt;

&lt;p&gt;My hacked up fork of USBKill for FreeNAS uses parsed output of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;usbconfig&lt;/code&gt; to monitor USB peripherals in the same manner as originally intended.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Please note that I have not given any attention to the ram/swap clearing fonctionality. It may or may not work with what is already on board a stock FreeNAS install.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You can find the &lt;a href=&quot;https://github.com/max302/usbkill/&quot;&gt;full repo on Github here&lt;/a&gt;, but essentially, only the &lt;a href=&quot;https://github.com/max302/usbkill/blob/master/usbkill/usbkill.py&quot;&gt;usbkill.py&lt;/a&gt; file has been modified.&lt;/p&gt;

&lt;p&gt;##Setting up USBKill on Freenas&lt;/p&gt;

&lt;p&gt;Writing to system folders like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/&lt;/code&gt; isn’t supported by FreeNAS, any changes will be wiped out on reboot. In order to add stuff to the base OS, you’ll need add stuff to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/conf/base/etc&lt;/code&gt;. In my experience, everything within this is upgrade-resistant too, although it’s probably a good idea to double-check after major upgrades. Add the necessary files with the following commands:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mkdir /conf/base/etc/usbkill&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd /conf/base/etc/usbkill&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wget https://raw.githubusercontent.com/max302/usbkill/master/usbkill/usbkill.py&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd /etc/base/etc/&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wget https://raw.githubusercontent.com/max302/usbkill/master/install/usbkill.ini&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Now, we’ll need to have the script start on boot. To do this, we’ll pass multiple commands in a one-liner through the &lt;a href=&quot;https://doc.freenas.org/9.3/freenas_tasks.html#init-shutdown-scripts&quot;&gt;built-in init/shutdown script options&lt;/a&gt;. Just add this line once the files have been put in place:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bash -c 'python /etc/usbkill/usbkill.py &amp;gt; /dev/null 2&amp;gt;&amp;amp;1' &amp;amp; &lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Once you have save the init command, reboot. Then, you can test functionality by looking for the process we have asked to be launched with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ps -aux | bash&lt;/code&gt;. You’ll also get a log at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/var/log/usbkill/usbkill.log&lt;/code&gt; that has timestamps. If the times line up with your last reboot, it’s working.&lt;/p&gt;

&lt;p&gt;You’ll notice that we’re calling on bash, which is an alternate shell on Freenas. This simply makes redirecting output to nul easier; I haven’t had great success with csh.&lt;/p&gt;

&lt;p&gt;Here’s a demo on my own FreeNAS system.&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/hej6ycgxWYo&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;pre-kill-commands&quot;&gt;Pre-kill commands&lt;/h2&gt;

&lt;p&gt;Depending on your use case, you might want to run certain pre-kill commands to cause even more grief to whoever is trying to plunder your server. Here are a few ideas:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;On an encrypted volume with no passphrase, or even on a volume with a passphrase, you may want to wipe the master AES key and your password encryption secret. These files can be found at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/data/geli/xxxxxxxx.key&lt;/code&gt;and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/data/pwenc_secret&lt;/code&gt; respectively. Deleting the files outright will work, but replacing the data with something plausible yet non-functional can cause even more confusion.&lt;/li&gt;
  &lt;li&gt;Without completely overwriting your disks, you can also quickly prevent an array from ever remounting by clearing the ZFS metadata. Check &lt;a href=&quot;https://icesquare.com/wordpress/freebsdhow-to-remove-zfs-meta-data/&quot;&gt;this blog post&lt;/a&gt; to learn how to do this.&lt;/li&gt;
  &lt;li&gt;Notify yourself. If you mail alerts are correctly configured throught the FreeNAS GUI, using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mail&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sendmail&lt;/code&gt; to send yourself a notification should be a one line ordeal.&lt;/li&gt;
  &lt;li&gt;Shutdown everything. Since python is accessible, it’s relatively easy to script stuff like IFTTT triggers or basically anything else you can think of. Set your home to lockdown mode, alert friends, mix and empty out your crypto wallets… with a little bit of code, you can do it all.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;##FreeNAS-specific additional considerations&lt;/p&gt;

&lt;p&gt;In addition to the other &lt;a href=&quot;https://maximerousseau.com/home-network-segmentation-nat-loopback-to-vlan-on-ubiquiti-unifi-gear/&quot;&gt;network security measures that I’ve gone through in this post&lt;/a&gt;, there are a couple of other things that you can do to protect your install of FreeNAS.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Disable serial consoles.&lt;/strong&gt; Does anybody actually use these things? They constitute an additional attack vector yet provide little to no actual functionality. Disable all serial ports in BIOS. If you still use serial… I don’t even know what to tell you.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Update and lock down your IPMI.&lt;/strong&gt; IPMI has been show to be a &lt;a href=&quot;https://www.wired.com/2013/07/ipmi/&quot;&gt;serious vulnerability&lt;/a&gt; in the past. Use a seperated VLAN, strong password, non-standard username. This is one of these things that WILL be defeated with physical access, unfortunately. However, most IPMI implementations connect virtual USB mouse and keyboard peripherals once remote consoles are opened; this means USBKill will catch any such attempt at remote administration unless the devices are whitelisted. See the &lt;a href=&quot;https://github.com/max302/usbkill/blob/master/install/usbkill.ini&quot;&gt;usbkill.ini&lt;/a&gt; file for details on how to whitelist peripherals.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If I have forgotten anything, please let me know through email at max @ thisdomain.com&lt;/p&gt;</content><author><name></name></author><category term="freenas" /><category term="usbkill" /><category term="counterforensics" /><category term="it" /><category term="is" /><category term="security" /><category term="zfs" /><summary type="html">By virtue of being a very multi-functional appliance in most settings, a FreeNAS machine has the potential to be a very sensible part of your rack. Even if you don’t use jails or VMs to host anything, it’s still a fileserver at the bare minimum, which means it hosts your data. I don’t think I need to emphasize that protecting your data is important. FreeNAS being built on ZFS, the appliance integrates robust encryption from the get-go, but disk encryption alone leaves several attack vectors wide-open.</summary></entry><entry><title type="html">Storj, The “Sharing” Economy and Why It Matters</title><link href="https://maximerousseau.com/storj-the-sharing-economy-and-why-it-matters/" rel="alternate" type="text/html" title="Storj, The “Sharing” Economy and Why It Matters" /><published>2017-03-18T18:23:30+03:00</published><updated>2017-03-18T18:23:30+03:00</updated><id>https://maximerousseau.com/storj-the-sharing-economy-and-why-it-matters</id><content type="html" xml:base="https://maximerousseau.com/storj-the-sharing-economy-and-why-it-matters/">&lt;p&gt;The sharing economy is a buzzword which has gained enormous traction despite the fact that it remains misunderstood, in my opinion. The luddite politicians who have been vocal against it on the grounds that it’s a dishonest loophole for escaping regulatory frameworks have it obviously wrong, but I feel that even enthusiastic participants and users probably haven’t considered all it’s implications. It’s not just about creating internet marketplaces for everything. The true genius of the sharing economy is twofold.&lt;/p&gt;

&lt;p&gt;First, it creates producers out of what would have been previously considered ordinary consumers. This in itself is an incredible thing which holds the promise of economic emancipation for a segment of the population who were previously unable to jump over the barrier to entry and start making money out of their property. Ordinary folks traditionally have had to buy productive goods and watch them depreciate before their eyes while they made limited use of it. The car is probably the best example of this: it’s an expensive piece of machinery that people pay to own, pay to use, pay to upkeep and often pay to store. It’s an expense, not an investment, because it simply can’t generate enough value in the hands of a single individual. &lt;a href=&quot;https://www.uber.com/invite/maximer1&quot;&gt;Uber&lt;/a&gt; and &lt;a href=&quot;https://turo.com/referral?code=2412490rc875B&quot;&gt;Turo&lt;/a&gt; have changed this, and though a website have transformed thousands of cars from consumer goods to capital goods. In the Marxist sense, people now literally own means of productions.&lt;/p&gt;

&lt;p&gt;Secondly, and this is closely related to the first point, the sharing economy enables optimal use of resources, which produces economic efficiency. Because economic efficiency means extracting every last bit of value out of every resource, be it goods like cars or consumables like energy, it should be championed. It’s good for the economy, good for the environment, and by lowering the cost of certain goods and services, it’s also a social good. To carry on with the transportation example, it appears self-evident that there are more than enough road-going vehicles currently in North-American to satisfy the entire aggregate demand for transportation, if only we had a means of extracting all this dormant value. The sharing economy is this means.&lt;/p&gt;

&lt;p&gt;Information technology has allowed the sharing economy, but it could also greatly profit from it. The turn to cloud-based server infrastructure is great, because it allows for cost-efficient and resilient systems that are easy to scale out, but the true cloud hasn’t yet been achieved. The “cloud” still lives in servers and cabinets which are centralized in server rooms and datacenters, and no amount of local redundancy will rid this model of it’s vulnerabilities to downtime. In essence, it’s really just somebody elses computer(s). Like it or not, &lt;a href=&quot;https://techcrunch.com/2017/02/28/amazon-aws-s3-outage-is-breaking-things-for-a-lot-of-websites-and-apps/&quot;&gt;AWS still suffers from outages&lt;/a&gt;. On the efficiency side of things, having millions of customers on the same ultra-robust infrastructure and enabling nearly automated scale-out makes sense, but in the aggregate, people who want or need their own hardware will continue to build for peak load. This means that a lot of compute, storage and network capacity is wasted while servers wait idly for sufficient solicitation. That’s for servers, but imagine the compute lost in ordinary desktop computers that are always powered on across the world, only to be used to browse Facebook a couple of hours a week.&lt;/p&gt;

&lt;p&gt;The next step in achieving in achieving a connected world is decentralizing compute and storage, making the internet truly everything-proof short of a nuclear apocalypse. Here again, as with the transportation problem, it can easily be imagined that this utopia could be achieve if the available compute and storage resources lying dormant could be utilized fully. Turns out, that’s already in the works, at least with storage: enter &lt;a href=&quot;https://app.storj.io/#/signup?referralLink=peep-tasty-554&quot;&gt;Storj&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://maximerousseau.files.wordpress.com/2017/03/storj_io-logo.png&quot;&gt;&lt;img class=&quot;aligncenter size-medium wp-image-1186&quot; src=&quot;https://maximerousseau.files.wordpress.com/2017/03/storj_io-logo.png?w=295&quot; alt=&quot;&quot; width=&quot;295&quot; height=&quot;300&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The Storj project uses blockchain technology to build a network of storage nodes which store data in a way that makes it fast, resilient and efficient. Users with spare storage and bandwidth can assign a certain quantity of hard drive space to be shared on the network, which is advertised via DHT, the same technology that enables trackerless bittorrent downloads, and loaned out through smart contracts to people or businesses who need their files hosted. The protocol manages redundancy, and has provisions for determining which blocs (or shards) go where based on parameters like availability, and speed of the hosting node. The network has been shown to be pretty fast, to the point where you can &lt;a href=&quot;https://vimeo.com/154743500&quot;&gt;stream media from it&lt;/a&gt;. Based on how much data you make available on the network, how much discrete contracts your node services and how well it does it, you get paid in a special &lt;a href=&quot;https://poloniex.com/exchange#BTC_SJCX&quot;&gt;crypto token&lt;/a&gt; that can be redeemed for other crypto and fiat. At scale, this token can also be used to pay for services, giving it real world value which makes it an interesting digital asset to hold.&lt;/p&gt;

&lt;p&gt;The first use case that comes to mind is a Dropbox-like service with lower cost per gigabyte and greater fault-tolerance (and possibly greater speed), but this is not what the Storj team is pursuing, choosing instead to focus on being a backend for other app builders and service providers. This is a smart choice, because the technology opens up incredible opportunities in networks that already exist, but rely on a more traditional server-client architecture. For one, anything that relies on a content distribution network (CDN) could benefit from this technology, in reducing the need for robust server infrastructure to serve content directly, giving redundant access to storage, and possibly reducing the cost of actually getting data from point A to point B. Consider an IP-based TV service provider of the traditional kind, which still puts receivers in it’s customers’ homes. With private Storj network, it could leverage the thousands of unfilled hard drives in it’s receivers to store on-demand content, radically decreasing it’s need for servers and stress on the main trunks of it’s infrastructure. If two neighbourhoods’ worth of receiver hard drives can store all of it’s on-demand content, why overbuild the link from theses two neighborhood to it’s datacenters hundreds of kilometers away? This way of doing things essentially spreads out the load on storage and network over a wider area, making a more efficient use of what resources are already in it.&lt;/p&gt;

&lt;p&gt;There have been other tries at distributed storage before. I’ve been involved in using &lt;a href=&quot;https://www.resilio.com&quot;&gt;Resilio&lt;/a&gt;, formerly known as BitTorrent Sync, in a fairly large production environment to transfer content, and it worked pretty well, but was intended to sync between your own nodes, not necessarily the network at large, making it less interesting in terms of it’s ability to spread the load. &lt;a href=&quot;https://syncthing.net&quot;&gt;Syncthing&lt;/a&gt; offers more or the less the same feature-set as Resilio, is open-souce and cross-platform, but suffers the same drawback of being aimed at providing file-sharing between nodes you operate yourself. None of these solutions do anything to utilize dormant resources, let alone remunerate you for contributing to the network. To put it otherwise, existing solutions are still within the traditional “cloud” paradigm of specialized machines doing particular jobs, wheres Storj goes way beyond that into the distributed cloud.&lt;/p&gt;

&lt;p&gt;If you have spare storage, and chances are that if you live in the developed world you most probably do, I strongly suggest that you encourage the project and download their app and start sharing. The project currently has several petabytes (a million gigbytes) of available storage, making it probably the biggest experiment in distributed storage to ever have existed. With important commercial agreements having recently kicked in, the product being out of beta, and paid access billing systems now fully functional, the network is surely going to see a spike of activity. You’ll be making money off storage you otherwise wouldn’t use, but you’d also be contributing in technology that will surely power power the internet of tomorrow. &lt;a href=&quot;https://storj.io/share.html&quot;&gt;The sharing page has everything you need to become a data farmer&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Projets like these show what the sharing economy is really about. It’s not really about sharing in the altruistic sense, it’s about using technology to break down barriers to entry and making markets work better, decentralizing all the things, and empowering consumers by promoting them to the status of producer.&lt;/p&gt;</content><author><name></name></author><category term="all" /><category term="cloud" /><category term="computer" /><category term="computing" /><category term="distributed" /><category term="network" /><category term="networking" /><category term="resilio" /><category term="storage" /><category term="storj" /><category term="synthing" /><summary type="html">The sharing economy is a buzzword which has gained enormous traction despite the fact that it remains misunderstood, in my opinion. The luddite politicians who have been vocal against it on the grounds that it’s a dishonest loophole for escaping regulatory frameworks have it obviously wrong, but I feel that even enthusiastic participants and users probably haven’t considered all it’s implications. It’s not just about creating internet marketplaces for everything. The true genius of the sharing economy is twofold.</summary></entry></feed>